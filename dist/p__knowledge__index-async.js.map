{"version":3,"sources":["src/pages/knowledge/index.tsx"],"sourcesContent":["import { PageContainer } from '@ant-design/pro-components';\nimport { Card, List, Tag, Space, Button, Input, Select, Statistic, Row, Col, Modal } from 'antd';\nimport { FileTextOutlined, FilePdfOutlined, FileWordOutlined, EyeOutlined, DownloadOutlined, SearchOutlined } from '@ant-design/icons';\nimport { useEffect, useState } from 'react';\nimport { request } from '@umijs/max';\n\nconst { Search } = Input;\nconst { Option } = Select;\n\ninterface DocumentType {\n  id: string;\n  title: string;\n  type: string;\n  project: string;\n  uploadDate: string;\n  size: string;\n  tags: string[];\n}\n\nconst Knowledge: React.FC = () => {\n  const [filterType, setFilterType] = useState<string>('all');\n  const [previewVisible, setPreviewVisible] = useState(false);\n  const [currentDoc, setCurrentDoc] = useState<DocumentType | null>(null);\n\n  // 内联 Mock 数据\n  const mockDocuments: DocumentType[] = [\n    {\n      id: '1',\n      title: '清华大学在线教育平台需求报告',\n      type: 'requirement',\n      project: '清华大学在线教育平台',\n      uploadDate: '2024-01-10',\n      size: '2.3 MB',\n      tags: ['需求分析', '在线教育', '清华大学'],\n    },\n    {\n      id: '2',\n      title: '清华大学在线教育平台验收报告',\n      type: 'acceptance',\n      project: '清华大学在线教育平台',\n      uploadDate: '2024-07-01',\n      size: '1.8 MB',\n      tags: ['验收', '项目完成', '清华大学'],\n    },\n    {\n      id: '3',\n      title: '北京大学智慧校园系统设计文档',\n      type: 'design',\n      project: '北京大学智慧校园系统',\n      uploadDate: '2024-03-05',\n      size: '4.5 MB',\n      tags: ['系统设计', '架构', '北京大学'],\n    },\n    {\n      id: '4',\n      title: '复旦大学数字图书馆需求报告',\n      type: 'requirement',\n      project: '复旦大学数字图书馆',\n      uploadDate: '2024-02-05',\n      size: '3.1 MB',\n      tags: ['需求分析', '图书馆', '复旦大学'],\n    },\n    {\n      id: '5',\n      title: '复旦大学数字图书馆验收报告',\n      type: 'acceptance',\n      project: '复旦大学数字图书馆',\n      uploadDate: '2024-07-25',\n      size: '2.2 MB',\n      tags: ['验收', '项目完成', '复旦大学'],\n    },\n    {\n      id: '6',\n      title: '上海交通大学选课系统设计文档',\n      type: 'design',\n      project: '上海交通大学选课系统',\n      uploadDate: '2024-04-10',\n      size: '3.8 MB',\n      tags: ['系统设计', '选课', '上海交大'],\n    },\n    {\n      id: '7',\n      title: '浙江大学实验室管理需求报告',\n      type: 'requirement',\n      project: '浙江大学实验室管理',\n      uploadDate: '2024-04-25',\n      size: '2.7 MB',\n      tags: ['需求分析', '实验室', '浙江大学'],\n    },\n    {\n      id: '8',\n      title: '南京大学学生管理系统设计文档',\n      type: 'design',\n      project: '南京大学学生管理系统',\n      uploadDate: '2024-05-28',\n      size: '4.2 MB',\n      tags: ['系统设计', '学生管理', '南京大学'],\n    },\n    {\n      id: '9',\n      title: '中国科技大学科研平台需求报告',\n      type: 'requirement',\n      project: '中国科技大学科研平台',\n      uploadDate: '2024-06-25',\n      size: '3.5 MB',\n      tags: ['需求分析', '科研', '中科大'],\n    },\n    {\n      id: '10',\n      title: '项目管理规范文档',\n      type: 'other',\n      project: '通用',\n      uploadDate: '2024-01-05',\n      size: '1.2 MB',\n      tags: ['规范', '管理', '通用'],\n    },\n  ];\n\n  const [documents] = useState<DocumentType[]>(mockDocuments);\n  const [filteredDocuments, setFilteredDocuments] = useState<DocumentType[]>(mockDocuments);\n\n  const stats = {\n    total: mockDocuments.length,\n    requirement: mockDocuments.filter(d => d.type === 'requirement').length,\n    acceptance: mockDocuments.filter(d => d.type === 'acceptance').length,\n    design: mockDocuments.filter(d => d.type === 'design').length,\n  };\n\n  useEffect(() => {\n    filterDocuments();\n  }, [filterType]);\n\n  const fetchData = async () => {\n    // 使用内联数据，不需要请求\n  };\n\n  const filterDocuments = () => {\n    if (filterType === 'all') {\n      setFilteredDocuments(documents);\n    } else {\n      setFilteredDocuments(documents.filter(doc => doc.type === filterType));\n    }\n  };\n\n  const handleSearch = (value: string) => {\n    if (!value) {\n      filterDocuments();\n      return;\n    }\n    const filtered = documents.filter(doc =>\n      doc.title.toLowerCase().includes(value.toLowerCase()) ||\n      doc.project.toLowerCase().includes(value.toLowerCase())\n    );\n    setFilteredDocuments(filtered);\n  };\n\n  const getFileIcon = (type: string) => {\n    switch (type) {\n      case 'requirement':\n        return <FileTextOutlined style={{ fontSize: 24, color: '#1890ff' }} />;\n      case 'acceptance':\n        return <FilePdfOutlined style={{ fontSize: 24, color: '#52c41a' }} />;\n      case 'design':\n        return <FileWordOutlined style={{ fontSize: 24, color: '#faad14' }} />;\n      default:\n        return <FileTextOutlined style={{ fontSize: 24, color: '#999' }} />;\n    }\n  };\n\n  const getTypeTag = (type: string) => {\n    const typeMap: Record<string, { color: string; text: string }> = {\n      requirement: { color: 'blue', text: '需求报告' },\n      acceptance: { color: 'green', text: '验收报告' },\n      design: { color: 'orange', text: '设计文档' },\n      other: { color: 'default', text: '其他' },\n    };\n    const config = typeMap[type] || typeMap.other;\n    return <Tag color={config.color}>{config.text}</Tag>;\n  };\n\n  const handlePreview = (doc: DocumentType) => {\n    setCurrentDoc(doc);\n    setPreviewVisible(true);\n  };\n\n  const handleDownload = (doc: DocumentType) => {\n    console.log('下载文档:', doc.title);\n    // 实现下载逻辑\n  };\n\n  return (\n    <PageContainer\n      title=\"知识文库\"\n      subTitle=\"项目文档管理与查询\"\n      extra={[\n        <Button key=\"upload\" type=\"primary\">\n          上传文档\n        </Button>,\n      ]}\n    >\n      {/* 统计卡片 */}\n      <Row gutter={16} style={{ marginBottom: 24 }}>\n        <Col span={6}>\n          <Card>\n            <Statistic\n              title=\"文档总数\"\n              value={stats.total || 0}\n              prefix={<FileTextOutlined />}\n            />\n          </Card>\n        </Col>\n        <Col span={6}>\n          <Card>\n            <Statistic\n              title=\"需求报告\"\n              value={stats.requirement || 0}\n              valueStyle={{ color: '#1890ff' }}\n            />\n          </Card>\n        </Col>\n        <Col span={6}>\n          <Card>\n            <Statistic\n              title=\"验收报告\"\n              value={stats.acceptance || 0}\n              valueStyle={{ color: '#52c41a' }}\n            />\n          </Card>\n        </Col>\n        <Col span={6}>\n          <Card>\n            <Statistic\n              title=\"设计文档\"\n              value={stats.design || 0}\n              valueStyle={{ color: '#faad14' }}\n            />\n          </Card>\n        </Col>\n      </Row>\n\n      {/* 搜索和筛选 */}\n      <Card style={{ marginBottom: 16 }}>\n        <Space size=\"large\" style={{ width: '100%' }}>\n          <Search\n            placeholder=\"搜索文档标题或项目名称\"\n            allowClear\n            enterButton={<SearchOutlined />}\n            size=\"large\"\n            onSearch={handleSearch}\n            style={{ width: 400 }}\n          />\n          <Select\n            value={filterType}\n            onChange={setFilterType}\n            style={{ width: 200 }}\n            size=\"large\"\n          >\n            <Option value=\"all\">全部类型</Option>\n            <Option value=\"requirement\">需求报告</Option>\n            <Option value=\"acceptance\">验收报告</Option>\n            <Option value=\"design\">设计文档</Option>\n            <Option value=\"other\">其他</Option>\n          </Select>\n        </Space>\n      </Card>\n\n      {/* 文档列表 */}\n      <Card>\n        <List\n          itemLayout=\"horizontal\"\n          dataSource={filteredDocuments}\n          pagination={{\n            pageSize: 10,\n            showSizeChanger: true,\n            showTotal: (total) => `共 ${total} 个文档`,\n          }}\n          renderItem={(item) => (\n            <List.Item\n              actions={[\n                <Button\n                  key=\"preview\"\n                  type=\"link\"\n                  icon={<EyeOutlined />}\n                  onClick={() => handlePreview(item)}\n                >\n                  预览\n                </Button>,\n                <Button\n                  key=\"download\"\n                  type=\"link\"\n                  icon={<DownloadOutlined />}\n                  onClick={() => handleDownload(item)}\n                >\n                  下载\n                </Button>,\n              ]}\n            >\n              <List.Item.Meta\n                avatar={getFileIcon(item.type)}\n                title={\n                  <Space>\n                    {item.title}\n                    {getTypeTag(item.type)}\n                  </Space>\n                }\n                description={\n                  <div>\n                    <p>项目: {item.project}</p>\n                    <Space>\n                      <span>上传时间: {item.uploadDate}</span>\n                      <span>大小: {item.size}</span>\n                    </Space>\n                    <div style={{ marginTop: 8 }}>\n                      {item.tags?.map((tag, index) => (\n                        <Tag key={index}>{tag}</Tag>\n                      ))}\n                    </div>\n                  </div>\n                }\n              />\n            </List.Item>\n          )}\n        />\n      </Card>\n\n      {/* 预览弹窗 */}\n      <Modal\n        title={currentDoc?.title}\n        open={previewVisible}\n        onCancel={() => setPreviewVisible(false)}\n        width={800}\n        footer={[\n          <Button key=\"download\" type=\"primary\" icon={<DownloadOutlined />} onClick={() => currentDoc && handleDownload(currentDoc)}>\n            下载\n          </Button>,\n          <Button key=\"close\" onClick={() => setPreviewVisible(false)}>\n            关闭\n          </Button>,\n        ]}\n      >\n        {currentDoc && (\n          <div style={{ padding: 24, background: '#f5f5f5', minHeight: 400 }}>\n            <p style={{ textAlign: 'center', color: '#999' }}>\n              文档预览功能开发中...\n            </p>\n            <p style={{ textAlign: 'center', color: '#999' }}>\n              文档: {currentDoc.title}\n            </p>\n          </div>\n        )}\n      </Modal>\n    </PageContainer>\n  );\n};\n\nexport default Knowledge;\n\n"],"names":[],"mappings":"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"}